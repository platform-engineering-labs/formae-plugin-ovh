/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

amends "@formae/forma.pkl"

import "@ovh/network/network.pkl"

import "./vars.pkl" as v

forma {
  v.stack
  v.target

  // Note: OVH networks are createOnly - updates not supported
  new network.Network {
    label = "plugin-sdk-test-network"
    name = "formae-plugin-sdk-test-\(v.testRunID)"
    subnet = new network.SubnetConfig {
      cidr = "10.0.0.0/24"
      ipVersion = 4
      enableDhcp = false  // Changed from true
      enableGatewayIp = true
      name = "formae-plugin-sdk-test-subnet-\(v.testRunID)"
      dnsNameServers {
        "1.1.1.1"  // Changed DNS servers
        "1.0.0.1"
      }
    }
  }
}
